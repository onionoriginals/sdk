{
  "project": "Originals CEL",
  "branchName": "feature/originals-cel",
  "description": "Reference implementation combining Originals Protocol with W3C CCG Cryptographic Event Log (CEL) specification, using Convex for real-time storage",
  "userStories": [
    {
      "id": "US-001",
      "title": "Create CEL types.ts with data model interfaces",
      "description": "As a developer, I need TypeScript types for the CEL data model so I can work with event logs.",
      "acceptanceCriteria": [
        "Create packages/sdk/src/cel/types.ts",
        "Define EventLog interface with events: LogEntry[] and optional previousLog: string",
        "Define LogEntry interface with type: create | update | deactivate, data: unknown, previousEvent?: string, proof: DataIntegrityProof[]",
        "Define ExternalReference interface with url?: string[], mediaType?: string, digestMultibase: string",
        "Define WitnessProof interface extending DataIntegrityProof with witnessedAt: string",
        "Export all types from packages/sdk/src/cel/index.ts",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "Created CEL types: EventLog, LogEntry, ExternalReference, DataIntegrityProof, WitnessProof, VerificationResult, AssetState"
    },
    {
      "id": "US-002",
      "title": "Implement digestMultibase hash computation",
      "description": "As a developer, I need to compute CEL-compliant content hashes for external references.",
      "acceptanceCriteria": [
        "Create packages/sdk/src/cel/hash.ts",
        "Function computeDigestMultibase(content: Uint8Array): string",
        "Uses sha2-256 hash algorithm",
        "Encodes as Multibase base64url-nopad (prefix u)",
        "Function verifyDigestMultibase(content: Uint8Array, digest: string): boolean",
        "Unit test verifies hash matches CEL spec example format",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": "Implemented computeDigestMultibase, verifyDigestMultibase, decodeDigestMultibase using @noble/hashes sha256 and existing multibase utilities"
    },
    {
      "id": "US-003",
      "title": "Implement createEventLog algorithm",
      "description": "As a developer, I need to create new event logs with a create event.",
      "acceptanceCriteria": [
        "Create packages/sdk/src/cel/algorithms/createEventLog.ts",
        "Function createEventLog(data: unknown, options: CreateOptions): Promise<EventLog>",
        "CreateOptions includes signer, verificationMethod, proofPurpose",
        "First event has type: create and no previousEvent",
        "Proof generated using eddsa-jcs-2022 cryptosuite",
        "Returns EventLog with single LogEntry",
        "Unit test creates log and verifies structure",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": true,
      "notes": "Implemented createEventLog with signer callback pattern. 18 unit tests covering structure, proofs, error handling, and data preservation."
    },
    {
      "id": "US-004",
      "title": "Implement updateEventLog algorithm",
      "description": "As a developer, I need to append update events to existing logs.",
      "acceptanceCriteria": [
        "Create packages/sdk/src/cel/algorithms/updateEventLog.ts",
        "Function updateEventLog(log: EventLog, data: unknown, options: UpdateOptions): Promise<EventLog>",
        "Computes previousEvent as digestMultibase of last event",
        "New event has type: update",
        "Returns new EventLog (does not mutate input)",
        "Unit test verifies hash chain links correctly",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": "Implemented updateEventLog with hash chain linking via computeDigestMultibase. 15 unit tests covering basic functionality, hash chain linking, immutability, proof generation, error handling, and data preservation."
    },
    {
      "id": "US-005",
      "title": "Implement deactivateEventLog algorithm",
      "description": "As a developer, I need to seal event logs with a deactivate event.",
      "acceptanceCriteria": [
        "Create packages/sdk/src/cel/algorithms/deactivateEventLog.ts",
        "Function deactivateEventLog(log: EventLog, reason: string, options: DeactivateOptions): Promise<EventLog>",
        "Final event has type: deactivate with reason in data",
        "Links to previous event via previousEvent hash",
        "Unit test verifies deactivation seals the log",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": true,
      "notes": "Implemented deactivateEventLog with hash chain linking, double-deactivation prevention, and reason/deactivatedAt in data. 20 unit tests covering all acceptance criteria."
    },
    {
      "id": "US-006",
      "title": "Implement verifyEventLog algorithm - proof verification",
      "description": "As a developer, I need to verify all proofs in an event log.",
      "acceptanceCriteria": [
        "Create packages/sdk/src/cel/algorithms/verifyEventLog.ts",
        "Function verifyEventLog(log: EventLog, options?: VerifyOptions): Promise<VerificationResult>",
        "VerificationResult has verified: boolean, errors: string[], events: EventVerification[]",
        "Verifies each event proof using eddsa-jcs-2022",
        "Returns detailed per-event verification status",
        "Unit test with valid log returns verified: true",
        "Unit test with tampered proof returns verified: false",
        "Typecheck passes"
      ],
      "priority": 6,
      "passes": true,
      "notes": "Implemented verifyEventLog with default proof verification for eddsa-jcs-2022/eddsa-rdfc-2022 cryptosuites. Supports custom verifier callback. 26 unit tests covering proof verification, tampered proof detection, error handling, and VerificationResult structure."
    },
    {
      "id": "US-007",
      "title": "Implement verifyEventLog - hash chain verification",
      "description": "As a developer, I need to verify the hash chain integrity of event logs.",
      "acceptanceCriteria": [
        "Extend verifyEventLog to check previousEvent references",
        "Verify each previousEvent matches digestMultibase of prior event",
        "First event must not have previousEvent",
        "Unit test with broken chain returns verified: false with specific error",
        "Unit test with valid chain passes",
        "Typecheck passes"
      ],
      "priority": 7,
      "passes": true,
      "notes": "Extended verifyEventLog with verifyChain function. Validates first event has no previousEvent, subsequent events have previousEvent matching digestMultibase of prior event. Added 7 new unit tests for hash chain verification."
    },
    {
      "id": "US-008",
      "title": "Implement WitnessService interface and witnessEvent",
      "description": "As a developer, I need a pluggable interface for witness services.",
      "acceptanceCriteria": [
        "Create packages/sdk/src/cel/witnesses/WitnessService.ts",
        "Interface WitnessService with witness(digestMultibase: string): Promise<WitnessProof>",
        "Create packages/sdk/src/cel/algorithms/witnessEvent.ts",
        "Function witnessEvent(event: LogEntry, witness: WitnessService): Promise<LogEntry>",
        "Appends witness proof to event proof array (does not replace controller proof)",
        "Unit test with mock witness adds second proof",
        "Typecheck passes"
      ],
      "priority": 8,
      "passes": true,
      "notes": "Implemented WitnessService interface and witnessEvent algorithm. 24 unit tests covering proof appending, immutability, error handling, and multiple witnesses."
    },
    {
      "id": "US-009",
      "title": "Implement JSON serialization for event logs",
      "description": "As a developer, I need to serialize event logs to JSON format.",
      "acceptanceCriteria": [
        "Create packages/sdk/src/cel/serialization/json.ts",
        "Function serializeEventLogJson(log: EventLog): string",
        "Function parseEventLogJson(json: string): EventLog",
        "Round-trip test: serialize then parse equals original",
        "Typecheck passes"
      ],
      "priority": 9,
      "passes": true,
      "notes": "Implemented serializeEventLogJson and parseEventLogJson with deterministic key ordering, validation, and WitnessProof support. 31 unit tests."
    },
    {
      "id": "US-010",
      "title": "Implement CBOR serialization for event logs",
      "description": "As a developer, I need compact CBOR serialization for bandwidth-sensitive use.",
      "acceptanceCriteria": [
        "Create packages/sdk/src/cel/serialization/cbor.ts",
        "Function serializeEventLogCbor(log: EventLog): Uint8Array",
        "Function parseEventLogCbor(cbor: Uint8Array): EventLog",
        "Uses existing cbor-js dependency",
        "Round-trip test: serialize then parse equals original",
        "CBOR output is smaller than JSON output",
        "Typecheck passes"
      ],
      "priority": 10,
      "passes": true,
      "notes": "Implemented serializeEventLogCbor and parseEventLogCbor using existing utils/cbor.ts and cbor-js dependency. 34 unit tests covering serialization, parsing, round-trip, size comparison (CBOR 20%+ smaller than JSON), and edge cases."
    },
    {
      "id": "US-011",
      "title": "Implement ExternalReferenceManager",
      "description": "As a developer, I need to create and resolve external resource references.",
      "acceptanceCriteria": [
        "Create packages/sdk/src/cel/ExternalReferenceManager.ts",
        "Function createExternalReference(content: Uint8Array, mediaType: string, urls?: string[]): ExternalReference",
        "Computes digestMultibase using computeDigestMultibase",
        "Function verifyExternalReference(ref: ExternalReference, content: Uint8Array): boolean",
        "Returns true if content hash matches digestMultibase",
        "Unit tests verify hash computation and verification",
        "Typecheck passes"
      ],
      "priority": 11,
      "passes": true,
      "notes": "Implemented createExternalReference and verifyExternalReference functions. 29 unit tests."
    },
    {
      "id": "US-012",
      "title": "Implement PeerCelManager for did:peer layer",
      "description": "As a developer, I need to create CEL-based assets in the did:peer layer.",
      "acceptanceCriteria": [
        "Create packages/sdk/src/cel/layers/PeerCelManager.ts",
        "Constructor accepts signer and optional config",
        "Method create(name: string, resources: ExternalReference[]): Promise<EventLog>",
        "Creates did:peer DID for the asset",
        "Generates create event with asset data",
        "No witnesses required (empty witness array)",
        "Integration test: create then verify cycle",
        "Typecheck passes"
      ],
      "priority": 12,
      "passes": true,
      "notes": "Implemented PeerCelManager with create() method. Generates did:peer numalgo 4 DIDs, creates CEL event log with create event. No witnesses (controller proof only). 29 unit tests."
    },
    {
      "id": "US-013",
      "title": "Add update and getCurrentState to PeerCelManager",
      "description": "As a developer, I need to update peer assets and derive current state.",
      "acceptanceCriteria": [
        "Add method update(log: EventLog, data: unknown): Promise<EventLog>",
        "Add method getCurrentState(log: EventLog): AssetState",
        "getCurrentState replays events to compute current asset state",
        "Integration test: create then update then getCurrentState shows updated data",
        "Typecheck passes"
      ],
      "priority": 13,
      "passes": true,
      "notes": "Implemented update() method wrapping updateEventLog with timestamp injection. Implemented getCurrentState() that replays events to derive AssetState including metadata and deactivation status. 26 new unit tests added."
    },
    {
      "id": "US-014",
      "title": "Implement HttpWitness service",
      "description": "As a developer, I need HTTP-based witnessing for did:webvh layer.",
      "acceptanceCriteria": [
        "Create packages/sdk/src/cel/witnesses/HttpWitness.ts",
        "Implements WitnessService interface",
        "Constructor accepts witnessUrl: string",
        "Posts digestMultibase to witness endpoint",
        "Parses WitnessProof from response",
        "Throws descriptive error if witness unavailable",
        "Unit test with mocked HTTP endpoint",
        "Typecheck passes"
      ],
      "priority": 14,
      "passes": true,
      "notes": "Implemented HttpWitness class with configurable timeout, custom headers, and custom fetch support. Includes HttpWitnessError for descriptive error handling. 43 unit tests."
    },
    {
      "id": "US-015",
      "title": "Implement WebVHCelManager for did:webvh layer",
      "description": "As a developer, I need to publish CEL assets to did:webvh.",
      "acceptanceCriteria": [
        "Create packages/sdk/src/cel/layers/WebVHCelManager.ts",
        "Constructor accepts signer, domain, and optional witnesses",
        "Method migrate(peerLog: EventLog): Promise<EventLog>",
        "Adds update event with migration data (sourceDid, targetDid, layer: webvh)",
        "Optionally adds witness proofs if witnesses configured",
        "Returns new log with webvh DID",
        "Integration test: peer log to webvh migration",
        "Typecheck passes"
      ],
      "priority": 15,
      "passes": true,
      "notes": "Implemented WebVHCelManager with migrate() method, getCurrentState(), and optional witness support. Generates did:webvh DIDs from source DID. 41 unit tests."
    },
    {
      "id": "US-016",
      "title": "Implement BitcoinWitness service",
      "description": "As a developer, I need Bitcoin-based witnessing for did:btco layer.",
      "acceptanceCriteria": [
        "Create packages/sdk/src/cel/witnesses/BitcoinWitness.ts",
        "Implements WitnessService interface",
        "Constructor accepts BitcoinManager instance",
        "witness() inscribes digestMultibase and returns proof with txid, blockHeight",
        "Proof includes satoshi ordinal as anchor",
        "Unit test with mock BitcoinManager",
        "Typecheck passes"
      ],
      "priority": 16,
      "passes": true,
      "notes": "Implemented BitcoinWitness class with BitcoinWitnessProof extending WitnessProof with txid, blockHeight, satoshi, inscriptionId. Uses bitcoin-ordinals-2024 cryptosuite. 35 unit tests."
    },
    {
      "id": "US-017",
      "title": "Implement BtcoCelManager for did:btco layer",
      "description": "As a developer, I need to inscribe CEL assets on Bitcoin.",
      "acceptanceCriteria": [
        "Create packages/sdk/src/cel/layers/BtcoCelManager.ts",
        "Constructor accepts signer, BitcoinManager",
        "Method migrate(webvhLog: EventLog): Promise<EventLog>",
        "Adds update event with migration data (layer: btco)",
        "Bitcoin witness is required and automatically added",
        "Returns log with did:btco DID",
        "Integration test with mock Bitcoin provider",
        "Typecheck passes"
      ],
      "priority": 17,
      "passes": true,
      "notes": "Implemented BtcoCelManager with migrate() method and getCurrentState(). BitcoinWitness automatically added on migration. Generates did:btco DIDs from inscription IDs. 40 unit tests."
    },
    {
      "id": "US-018",
      "title": "Create unified OriginalsCel SDK entry point",
      "description": "As a developer, I need a single entry point for all CEL operations.",
      "acceptanceCriteria": [
        "Create packages/sdk/src/cel/OriginalsCel.ts",
        "Constructor accepts { layer: peer | webvh | btco, signer, config? }",
        "Method create(name, resources): Promise<EventLog>",
        "Method update(log, data): Promise<EventLog>",
        "Method verify(log): Promise<VerificationResult>",
        "Method migrate(log, targetLayer): Promise<EventLog>",
        "Delegates to appropriate layer manager",
        "Export from packages/sdk/src/index.ts",
        "Typecheck passes"
      ],
      "priority": 18,
      "passes": true,
      "notes": "Implemented OriginalsCel unified SDK with create, update, verify, migrate, and getCurrentState methods. Supports all three layers with lazy manager creation. 35 unit tests. Also exported all CEL types and functions from main SDK index.ts."
    },
    {
      "id": "US-019",
      "title": "Create CLI entry point with help command",
      "description": "As a user, I need a CLI tool to work with CEL assets.",
      "acceptanceCriteria": [
        "Create packages/sdk/src/cel/cli/index.ts",
        "Uses process.argv for argument parsing (no new dependencies)",
        "Subcommands: create, verify, inspect, migrate",
        "--help shows usage for all commands",
        "--version shows package version",
        "Add bin entry to package.json: originals-cel",
        "Typecheck passes"
      ],
      "priority": 19,
      "passes": true,
      "notes": "Created CLI entry point with parseArgs(), main(), and comprehensive help for all commands. Added bin entry to package.json."
    },
    {
      "id": "US-020",
      "title": "Implement CLI create command",
      "description": "As a user, I want to create CEL assets from the command line.",
      "acceptanceCriteria": [
        "Create packages/sdk/src/cel/cli/create.ts",
        "Usage: originals-cel create --name Asset --file ./content.png",
        "Generates new Ed25519 key pair if --key not provided",
        "Outputs event log JSON to stdout or --output file",
        "Supports --format json|cbor flag",
        "Clear error messages for missing/invalid arguments",
        "Typecheck passes"
      ],
      "priority": 20,
      "passes": true,
      "notes": "Implemented CLI create command with Ed25519 key generation, JSON/CBOR output, MIME type detection, and comprehensive error handling. 18 unit tests."
    },
    {
      "id": "US-021",
      "title": "Implement CLI verify command",
      "description": "As a user, I want to verify CEL event logs from the command line.",
      "acceptanceCriteria": [
        "Create packages/sdk/src/cel/cli/verify.ts",
        "Usage: originals-cel verify --log ./asset.cel.json",
        "Outputs verification result with event-by-event breakdown",
        "Shows witness attestations if present",
        "Exit code 0 on success, 1 on failure",
        "Clear error showing which event/proof failed",
        "Typecheck passes"
      ],
      "priority": 21,
      "passes": true,
      "notes": "Implemented CLI verify command with detailed event-by-event breakdown, witness attestation display, proper exit codes. Supports JSON and CBOR formats. 15 unit tests."
    },
    {
      "id": "US-022",
      "title": "Implement CLI inspect command",
      "description": "As a user, I want to inspect CEL logs in human-readable format.",
      "acceptanceCriteria": [
        "Create packages/sdk/src/cel/cli/inspect.ts",
        "Usage: originals-cel inspect --log ./asset.cel.json",
        "Pretty-prints event timeline with timestamps",
        "Shows current state derived from events",
        "Lists witnesses and attestation times",
        "Shows layer history if migrations present",
        "Typecheck passes"
      ],
      "priority": 22,
      "passes": true,
      "notes": "Implemented CLI inspect command with event timeline, current state derivation, witness attestation display, and layer history. Supports JSON and CBOR formats. 20 unit tests."
    },
    {
      "id": "US-023",
      "title": "Implement CLI migrate command",
      "description": "As a user, I want to migrate CEL assets between layers via CLI.",
      "acceptanceCriteria": [
        "Create packages/sdk/src/cel/cli/migrate.ts",
        "Usage: originals-cel migrate --log ./asset.cel.json --to webvh --domain example.com",
        "Adds migration event to log",
        "Outputs updated log to stdout or --output file",
        "For btco: requires --wallet flag with key path",
        "Clear error if migration path invalid",
        "Typecheck passes"
      ],
      "priority": 23,
      "passes": true,
      "notes": "Implemented CLI migrate command with peer\u2192webvh and webvh\u2192btco migration paths. Supports JSON/CBOR input/output, --domain for webvh, --wallet for btco. 23 unit tests."
    },
    {
      "id": "US-024",
      "title": "Initialize Convex project in Explorer",
      "description": "As a developer, I need Convex set up in the Explorer app.",
      "acceptanceCriteria": [
        "Create explorer/convex folder structure",
        "Run npx convex init in explorer directory",
        "Update explorer/package.json scripts: add convex dev and convex deploy",
        "Verify npx convex dev runs without errors",
        "Typecheck passes"
      ],
      "priority": 24,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-025",
      "title": "Create Convex schema for Originals with CEL",
      "description": "As a developer, I need Convex tables for storing Originals and CEL logs.",
      "acceptanceCriteria": [
        "Create explorer/convex/schema.ts",
        "Define originals table with: name, did, layer, creatorDid, metadata, celLog, celVersion, celVerifiedAt",
        "Define users table with: did, email, publicKey, didDocument",
        "Define resources table with: originalId, digestMultibase, mediaType, url",
        "Add appropriate indexes on did, creatorDid, layer",
        "Run npx convex dev to generate types",
        "Typecheck passes"
      ],
      "priority": 25,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-026",
      "title": "Create Convex queries for Originals",
      "description": "As a developer, I need Convex queries to fetch Originals data.",
      "acceptanceCriteria": [
        "Create explorer/convex/originals.ts",
        "Query getOriginal(id): returns single original with CEL log",
        "Query listOriginals(filters?): returns paginated list",
        "Query getOriginalsByCreator(creatorDid): returns creator originals",
        "Query getOriginalByDid(did): returns original by DID",
        "All queries include celLog field",
        "Typecheck passes"
      ],
      "priority": 26,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-027",
      "title": "Create Convex mutations for Originals",
      "description": "As a developer, I need Convex mutations to create and update Originals.",
      "acceptanceCriteria": [
        "Add to explorer/convex/originals.ts",
        "Mutation createOriginal(args): creates original with initial CEL log",
        "Mutation updateOriginal(id, updates): updates original metadata",
        "Mutation setCelLog(id, log): stores/updates CEL log",
        "Mutation setCelVerified(id, timestamp): marks as verified",
        "All mutations validate input and return created/updated record",
        "Typecheck passes"
      ],
      "priority": 27,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-028",
      "title": "Create Convex action for CEL verification",
      "description": "As a developer, I need a Convex action to verify CEL logs server-side.",
      "acceptanceCriteria": [
        "Create explorer/convex/cel.ts",
        "Action verifyCelLog(originalId): fetches log and verifies using SDK",
        "Returns VerificationResult with detailed status",
        "Updates celVerifiedAt on successful verification",
        "Imports verifyEventLog from @originals/sdk",
        "Typecheck passes"
      ],
      "priority": 28,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-029",
      "title": "Set up Convex provider in Explorer React app",
      "description": "As a developer, I need Convex client configured in the Explorer.",
      "acceptanceCriteria": [
        "Create explorer/src/lib/convex.ts with ConvexClient setup",
        "Update explorer/src/main.tsx to wrap app in ConvexProvider",
        "Read Convex URL from environment variable VITE_CONVEX_URL",
        "Add .env.example with VITE_CONVEX_URL placeholder",
        "Verify Convex connection works in browser console",
        "Typecheck passes"
      ],
      "priority": 29,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-030",
      "title": "Create useOriginal Convex hook",
      "description": "As a frontend developer, I need a hook to fetch single Originals.",
      "acceptanceCriteria": [
        "Create explorer/src/hooks/useOriginal.ts",
        "Uses Convex useQuery with getOriginal query",
        "Returns { original, isLoading, error }",
        "Includes CEL log in returned original",
        "Typecheck passes"
      ],
      "priority": 30,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-031",
      "title": "Create useOriginals Convex hook for lists",
      "description": "As a frontend developer, I need a hook to fetch Original lists.",
      "acceptanceCriteria": [
        "Create explorer/src/hooks/useOriginals.ts",
        "Uses Convex useQuery with listOriginals query",
        "Accepts optional filters: layer, creatorDid",
        "Returns { originals, isLoading, error }",
        "Supports pagination via Convex patterns",
        "Typecheck passes"
      ],
      "priority": 31,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-032",
      "title": "Create useCelVerification Convex hook",
      "description": "As a frontend developer, I need a hook to verify CEL logs.",
      "acceptanceCriteria": [
        "Create explorer/src/hooks/useCelVerification.ts",
        "Uses Convex useAction with verifyCelLog action",
        "Returns { verify, result, isVerifying, error }",
        "verify() triggers verification and updates result",
        "Typecheck passes"
      ],
      "priority": 32,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-033",
      "title": "Create CelVerificationBadge component",
      "description": "As an Explorer user, I want to see verification status on assets.",
      "acceptanceCriteria": [
        "Create explorer/src/components/cel/CelVerificationBadge.tsx",
        "Props: originalId: string, size?: sm | md",
        "Uses useOriginal hook to get CEL log status",
        "Shows green checkmark icon when celVerifiedAt is set",
        "Shows yellow warning icon if CEL log exists but not verified",
        "Shows gray icon if no CEL log",
        "Tooltip shows verification status",
        "Typecheck passes",
        "Verify in browser using cursor-ide-browser MCP"
      ],
      "priority": 33,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-034",
      "title": "Create CelEventTimeline component",
      "description": "As an Explorer user, I want to see the event history of an asset.",
      "acceptanceCriteria": [
        "Create explorer/src/components/cel/CelEventTimeline.tsx",
        "Props: celLog: EventLog",
        "Displays vertical timeline of events",
        "Each event shows: type badge, timestamp, data summary",
        "Create events show asset name and creator",
        "Update events show what changed",
        "Migration events show source to target layer",
        "Typecheck passes",
        "Verify in browser using cursor-ide-browser MCP"
      ],
      "priority": 34,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-035",
      "title": "Add expandable event details to CelEventTimeline",
      "description": "As an Explorer user, I want to see full event details on click.",
      "acceptanceCriteria": [
        "Add expand/collapse to each timeline event",
        "Expanded view shows full event data as formatted JSON",
        "Shows proof details: cryptosuite, verificationMethod, proofPurpose",
        "Shows witness proofs with witnessedAt timestamps",
        "Collapse button to hide details",
        "Typecheck passes",
        "Verify in browser using cursor-ide-browser MCP"
      ],
      "priority": 35,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-036",
      "title": "Add Provenance tab to original-detail page",
      "description": "As an Explorer user, I want a dedicated tab showing CEL provenance.",
      "acceptanceCriteria": [
        "Add Provenance tab to explorer/src/pages/original-detail.tsx",
        "Tab shows CelVerificationBadge at top",
        "Tab shows CelEventTimeline component",
        "Shows No provenance log message if asset has no CEL log",
        "Add Verify button that calls useCelVerification",
        "Typecheck passes",
        "Verify in browser using cursor-ide-browser MCP"
      ],
      "priority": 36,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-037",
      "title": "Add raw CEL log viewer to Provenance tab",
      "description": "As an Explorer user, I want to view and download the raw CEL log.",
      "acceptanceCriteria": [
        "Add collapsible Raw Log section to Provenance tab",
        "Shows formatted JSON in code block",
        "Copy button copies JSON to clipboard",
        "Download button downloads as .cel.json file",
        "Typecheck passes",
        "Verify in browser using cursor-ide-browser MCP"
      ],
      "priority": 37,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-038",
      "title": "Create useCreateOriginal mutation hook",
      "description": "As a frontend developer, I need a hook to create new Originals.",
      "acceptanceCriteria": [
        "Create explorer/src/hooks/useCreateOriginal.ts",
        "Uses Convex useMutation with createOriginal mutation",
        "Returns { createOriginal, isCreating, error }",
        "createOriginal accepts name, resources, creatorDid",
        "Automatically generates CEL log using SDK",
        "Typecheck passes"
      ],
      "priority": 38,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-039",
      "title": "Update create-original page to use Convex",
      "description": "As an Explorer user, I want to create Originals with CEL via the UI.",
      "acceptanceCriteria": [
        "Modify explorer/src/pages/create-original-simple.tsx",
        "Replace existing API calls with useCreateOriginal hook",
        "After creating, show CEL verification badge",
        "Success message mentions provenance created",
        "Loading state while creating",
        "Typecheck passes",
        "Verify in browser using cursor-ide-browser MCP"
      ],
      "priority": 39,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-040",
      "title": "Create useMigrateOriginal mutation hook",
      "description": "As a frontend developer, I need a hook to migrate Originals between layers.",
      "acceptanceCriteria": [
        "Create explorer/src/hooks/useMigrateOriginal.ts",
        "Uses Convex useMutation",
        "Returns { migrate, isMigrating, error }",
        "migrate(originalId, targetLayer) updates CEL log with migration event",
        "Supports migration to webvh and btco layers",
        "Typecheck passes"
      ],
      "priority": 40,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-041",
      "title": "Update migrate-original page to use Convex",
      "description": "As an Explorer user, I want migrations to update the CEL log.",
      "acceptanceCriteria": [
        "Modify explorer/src/pages/migrate-original-simple.tsx",
        "Use useMigrateOriginal hook",
        "Show CEL event timeline after migration",
        "Migration event visible in timeline",
        "Error handling for invalid migrations",
        "Typecheck passes",
        "Verify in browser using cursor-ide-browser MCP"
      ],
      "priority": 41,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-042",
      "title": "Write CEL lifecycle integration tests",
      "description": "As a developer, I need integration tests for the full CEL lifecycle.",
      "acceptanceCriteria": [
        "Create packages/sdk/tests/integration/cel-lifecycle.test.ts",
        "Test: create peer asset then update then verify passes",
        "Test: migrate peer to webvh adds migration event",
        "Test: tampered log verification fails with specific error",
        "Test: broken hash chain verification fails",
        "Test: deactivate seals log (further updates rejected)",
        "All tests pass"
      ],
      "priority": 42,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-043",
      "title": "Write Originals CEL Application Specification document",
      "description": "As a protocol implementer, I need the formal spec document.",
      "acceptanceCriteria": [
        "Create sdk/docs/ORIGINALS_CEL_SPEC.md",
        "Section: Introduction (what this spec defines)",
        "Section: Cryptographic Control (DID-based authorization)",
        "Section: State Derivation (how to compute current state from events)",
        "Section: Witness Rules (none/HTTP/Bitcoin per layer)",
        "Section: Event Types (create, update, deactivate with examples)",
        "Section: Migration Events (layer transitions)",
        "Typecheck passes"
      ],
      "priority": 43,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-044",
      "title": "Write Originals CEL Developer Guide",
      "description": "As a developer, I need documentation to use the SDK.",
      "acceptanceCriteria": [
        "Create sdk/docs/ORIGINALS_CEL_GUIDE.md",
        "Section: Quick Start (5-minute example)",
        "Section: Core Concepts (event logs, layers, witnesses)",
        "Section: SDK API Reference (OriginalsCel class methods)",
        "Section: CLI Usage (all commands with examples)",
        "Section: Convex Integration (hooks, real-time updates)",
        "Link to CEL spec and Originals whitepaper",
        "Typecheck passes"
      ],
      "priority": 44,
      "passes": false,
      "notes": ""
    }
  ]
}